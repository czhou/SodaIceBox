
<soda>
	<!--
		Create case_Verify that a related case can be created from contact detail view
	-->
	<puts text="Test: Contacts_1499.xml starting." />

	<!--Create prepared record-->
	<script file='{@global.scriptsdir}/modules/lib/Account_Create_Lib.xml'/>
	<script file='{@global.scriptsdir}/modules/lib/Contact_Create_Lib.xml'/>

	<!--Search the Contact record-->
	<link id="moduleTab_Contacts" />
	<div class="moduleTitle">
		<link href="index.php?module=Contacts&amp;action=index" click="false" />
	</div>
	<textfield id="search_name_basic" set="{@pre_contact_first_name}" />
	<button id="search_form_submit" />
	<table class="list view">
		<link text="{@pre_contact_first_name} {@pre_contact_last_name}" />
	</table>

	<!--Create case via case subpanel-->
	<!--Goto full form to fill-->
	<button id="contacts_cases_create_button"/>
	<button id="Cases_subpanel_full_form_button"/>
	<wait timeout="2"/>

	<!-- Create an account record. -->
	<csv file="{@global.scriptsdir}/modules/lib/Case_Create_Lib.csv" var="case_record">
		<timestamp />
		<textfield id="name" set="{@case_record.name} {@user.name} {@stamp}" />
		<textfield id="account_name" append="{@pre_account_name}" />
		<textfield id="account_name" jscriptevent="onkeyup" />

		<!--
		need to find the element we want in the dynamic drop down list.
		Since it should always be the first element we are just using
		Indexes.
		-->
		<div id="EditView_account_name_results">
			<div class="yui-ac-bd">
				<ul index="1">
					<li index="1" click="true" />
				</ul>
			</div>
		</div>
		<wait timeout="3" />

		<textfield id="name" jscriptevent="onfocus" />
		<wait timeout="5" />
		<button value="Save" />

		<var var="pre_case_name" set="{@case_record.name} {@user.name} {@stamp}" />
	</csv>

	<!--Verify created case show in subpanel-->
	<div id="list_subpanel_cases">
		<link text="{@pre_case_name}" click="false"  exist="true"/>
		<browser assert="{@pre_case_name}"/>
	</div>

	<!--Delete records-->
	<script file="{@global.scriptsdir}/modules/lib/Contact_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Case_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Account_Delete_Lib.xml" />
	<puts text="Test: Contacts_1499.xml finished." />
</soda>
