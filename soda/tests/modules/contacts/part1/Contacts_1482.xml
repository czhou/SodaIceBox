
<soda>
	<!--
		Delete composed email_Verify that a related email can be deleted from contact detail view
	-->
	<puts text="Test: Contacts_1482.xml starting." />

	<!--Create three records and save its counter-->
	<script file="{@global.scriptsdir}/modules/lib/Email_Setting_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Contact_Create_Lib.xml" />

	<link id="moduleTab_Contacts" />

	<!--Select a lead record-->
	<textfield id="search_name_basic" set="{@pre_contact_first_name}" />
	<button id="search_form_submit" />

	<!--Go to detail view of the first record-->
	<link text="{@pre_contact_first_name} {@pre_contact_last_name}" />
	<browser assert="{@pre_contact_first_name} {@pre_contact_last_name}" />

	<!--Compose a email from subpanel-->
	<timestamp/>
	<csv file="{@global.scriptsdir}/modules/lib/Contact_Create_Lib.csv" var="Contacts_1482_Contact"/>
	<button id="composeemail_button"/>
	<wait timeout="3" />
	<textfield id="addressTO0" set="{@Contacts_1482_Contact.emailAddress0}"/>
	<textfield id="emailSubject0" set="Contacts_1482_subject_{@stamp}"/>
	<var var="contact_1482_email_name" set="Contacts_1482_subject_{@stamp}"/>
	<wait timeout="1" />

	<!--Send the email-->
	<table id="composeHeaderTable0">
		<button index="1" alert="true"/>
		<wait timeout="15"/>
	</table>

	<div id="list_subpanel_history">
		<link  class="listViewTdToolsS1" index="2" alert="true"/>
	</div>
	<wait timeout="5"/>

	<!--Check contact history subpanel-->
	<div id="list_subpanel_history">
		<link text="{@contact_1482_email_name}" click="false" exists="false"/>
		<browser assertnot="Sent"/>
		<browser assertnot="{@pre_contact_first_name} {@pre_contact_last_name}"/>
	</div>

	<!--Delete the record-->
	<script file="{@global.scriptsdir}/modules/lib/Contact_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Account_Delete_Lib.xml" />
	<puts text="Test: Contacts_1482.xml finished." />
</soda>
