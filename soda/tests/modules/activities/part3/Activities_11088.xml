
<soda>
	<!--
		Action:
			a)    Login Sugar CRM as a valid user
			b)    Go to in ListView/Subpanel/Dashlets that has Call/Meeting
			c)    Try to close this task by click “X” button
			d)    Select “OK” from pop up message window
		Expectation:
			a) For action(c), show pop up message window as 
				"Are you sure you want to close this Call/Meeting"
			b) For action(d), selected Call/Meeting be marked
				as held and disappear from Activities subpanel list view
				But they will be shown in History subpanel
				/* Franklin 02/17/2011: 6.1.3 */
	-->
	<puts text="Test: Activities_11088.xml starting." />

	
	<!-- set up environment for Subpanel -->
	
	<script file="{@global.scriptsdir}/modules/lib/Account_Create_Lib.xml" />
	<var var="account2_name" set="{@pre_account_name}" />
	
	<button id="Activities_schedulemeeting_button" />
	
	<timestamp />
	<var var="meeting2_name" set="Meeting_{@stamp}" />
	<textfield id="name" set="{@meeting2_name}" />
	
	<button id="Meetings_subpanel_save_button" />
	<wait timeout="15" />
	
	<!-- should be an activity and not in history -->
	<div id="subpanel_activities">
		<browser assert="{@meeting2_name}" />
	</div>
	
	<div id="subpanel_history">
		<browser assertnot="{@meeting2_name}" />
	</div>
	
	<div id="subpanel_activities">
		<row class="oddListRowS1">
			<link index="2" />
		</row>
	</div>
	
	<div id="closeActivityDialog">
		<browser assert="Do you want to close this meeting?" />
		<button value="OK" />
	</div>
	
	<wait timeout="25" />
	
	<!-- opposite should be true now -->
	
	<div id="subpanel_activities">
		<browser assertnot="{@meeting2_name}" />
	</div>
	
	<div id="subpanel_history">
		<browser assert="{@meeting2_name}" />
	</div>
	
	<!-- now for calls -->
	<!-- set up environment for Subpanel -->
	
	<script file="{@global.scriptsdir}/modules/lib/Account_Create_Lib.xml" />
	<var var="account3_name" set="{@pre_account_name}" />
	
	<button id="Activities_logcall_button" />
	
	<timestamp />
	<var var="call2_name" set="Call_{@stamp}" />
	<textfield id="name" set="{@call2_name}" />
	
	<button id="Calls_subpanel_save_button" />
	<wait timeout="15" />
	
	<!-- should be an activity and not in history -->
	
	<div id="subpanel_activities">
		<browser assert="{@call2_name}" />
	</div>
	
	<div id="subpanel_history">
		<browser assertnot="{@call2_name}" />
	</div>
	
	<div id="subpanel_activities">
		<row class="oddListRowS1">
			<link index="2" />
		</row>
	</div>
	
	<div id="closeActivityDialog">
		<browser assert="Do you want to close this call?" />
		<button value="OK" />
	</div>
	
	<wait timeout="25" />
	
	<!-- opposite should be true now -->
	<div id="subpanel_activities">
		<browser assertnot="{@call2_name}" />
	</div>
	
	<div id="subpanel_history">
		<browser assert="{@call2_name}" />
	</div>
	
	<script file="{@global.scriptsdir}/modules/lib/Account_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Meeting_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Call_Delete_Lib.xml" />
	
	<puts text="Test: Activities_11088.xml finished." />
</soda>
