<soda>
	<!-- Verify results of function strToUpper in a calculated field. -->
	<puts text="Test: Studio_10150.xml starting." />
	<timestamp />

	<!-- set description field as calculated field and define formula -->
	<!-- We use an OOTB field instead of creating one since we can't drag and drop to put it on the layout. -->
	<link text="Admin" />

	<link text="Studio" />

	<link text="Accounts" class="studiolink" />

	<link text="Fields" class="studiolink" />

	<link text="description" class="mbLBLL" />

	<checkbox id="calculated" set="true" />
	<wait timeout="1" />
	<button value="Edit Formula" />
	<wait timeout="3" />
	<browser assert="Formula Builder" />
	<div id="formulaBuilderWindow" >
		<textfield id="formulaInput" set="strToUpper($billing_address_city)"/>
		<button value="Save" />
	</div>
	<wait timeout="3" />
	<form id="popup_form_id" >
		<button name="fsavebtn" />
	</form>
	<wait timeout="10" />
	<browser assert="Add Field" />

	<!-- create account record and check calculated field -->
	<link id="moduleTab_Accounts" />

	<csv file="{@global.scriptsdir}/csvs/studio/Studio_10150.csv" var="studio10150">
		<link text="Create Account" />
		<browser assert="Account Overview" />

		<form id="EditView">
			<textfield id="name" set="{@studio10150.name} {@user.name} {@stamp}" />
			<textfield id="billing_address_city" set="{@studio10150.city}" />
			<textfield id="billing_address_city" click="false" jscriptevent="onchange" />
			<textfield id="description" assert="{@studio10150.des}" />
			<button value="Save" />
		</form>
		<wait timeout="3" />
		<browser assert="{@studio10150.name} {@user.name} {@stamp}" />

		<table id="detailpanel_1">
			<span id="description" assert="{@studio10150.des}" />
		</table>
	</csv>

	<!-- Now make the field uncalculated. -->
	<link text="Admin" />

	<link text="Studio" />

	<link text="Accounts" class="studiolink" />

	<link text="Fields" class="studiolink" />

	<link text="description" class="mbLBLL" />
	<checkbox id="calculated" set="false" />
	<form id="popup_form_id" >
		<browser assertnot="Formula Builder" />
		<button name="fsavebtn" />
	</form>
	<wait timeout="3" />

	<!-- Delete account record -->
	<script file="{@global.scriptsdir}/modules/lib/Account_Delete_Lib.xml" />

	<puts text="Test: Studio_10150.xml finished." />
</soda>
