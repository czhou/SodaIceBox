
<soda>
	<!--
		Covert a new lead with copying related activities to account and contact
	-->
	<puts text="Test: Leads_11544.xml starting" />

	<!--Goto admin system setting to update coversion selection as copying-->
	<link text="Admin"/>
	<link text="System Settings"/>
	<select name="lead_conv_activity_opt" set="Copy"/>
	<button name="save" />

	<!--Create three records and save its counter-->
	<script file="{@global.scriptsdir}/modules/lib/Email_Setting_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Lead_Create_Lib.xml" />

	<link id="moduleTab_Leads" />

	<!--Select a lead record-->
	<textfield id="search_name_basic" set="{@pre_lead_first_name}" />
	<button id="search_form_submit" />

	<!--Go to detail view of the first record-->
	<link text="{@pre_lead_salutation} {@pre_lead_first_name} {@pre_lead_last_name}" />
	<browser assert="{@pre_lead_salutation} {@pre_lead_first_name} {@pre_lead_last_name}" />

	<!--Create a task from subpanel-->
	<form id="form_SubpanelQuickCreate_Tasks">
		<csv file="{@global.scriptsdir}/modules/lib/Task_Create_Lib.csv" var="lead_11544_task">
			<timestamp/>
			<button id="Activities_createtask_button"/>
			<textfield id="name" set="{@lead_11544_task.name} {@user.name} {@stamp}" />
			<select id="priority" set="{@lead_11544_task.priority}" />
			<select id="status" set="{@lead_11544_task.status}" />
			<textfield id="description" set="{@lead_11544_task.description}" />

			<!--Due Date-->
			<textfield id="date_due_date" set="{@lead_11544_task.date_due_date}" />
			<select id="date_due_hours" set="{@lead_11544_task.date_due_hours}" />
			<select id="date_due_minutes" set="{@lead_11544_task.date_due_minutes}" />
			<checkbox id="date_due_flag" set="{@lead_11544_task.date_due_flag}" />

			<!--Start Date-->
			<textfield id="date_start_date" set="{@lead_11544_task.date_start_date}" />
			<select id="date_start_hours" set="{@lead_11544_task.date_start_hours}" />
			<select id="date_start_minutes" set="{@lead_11544_task.date_start_minutes}" />
			<checkbox id="date_start_flag" set="{@lead_11544_task.date_start_flag}" />

			<button value="Save" />
			<var var="lead_11544_task_name" set="{@lead_11544_task.name} {@user.name} {@stamp}" />

		</csv>
	</form>
	<wait timeout="3"/>
	<div id="list_subpanel_activities">
		<link text="{@lead_11544_task_name}" click="false" exists="true"/>
	</div>

	<!--Create a meeting from activities subpanel-->
	<form id="form_SubpanelQuickCreate_Meetings">
		<csv file="{@global.scriptsdir}/modules/lib/Meeting_Create_Lib.csv" var="lead_11544_meeting">
			<timestamp/>
			<button id="Activities_schedulemeeting_button"/>
			<textfield id="name" set="{@lead_11544_meeting.name} {@user.name} {@stamp}" />
			<textfield id="location" set="{@lead_11544_meeting.location}" />
			<textfield id="description" set="{@lead_11544_meeting.description}" />
			<select id="status" set="{@lead_11544_meeting.status}" />
			<textfield id="date_start_date" set="{@lead_11544_meeting.date_start_date}" />
			<select id="date_start_hours" set="{@lead_11544_meeting.date_start_hours}" />
			<select id="date_start_minutes" set="{@lead_11544_meeting.date_start_minutes}" />
			<textfield name="duration_hours" set="{@lead_11544_meeting.duration_hours}" />
			<select name="duration_minutes" set="{@lead_11544_meeting.duration_minutes}" />
			<checkbox name="reminder_checked" set="{@lead_11544_meeting.reminder_checked}" />

			<button id="Meetings_subpanel_save_button" />
			<var var="lead_11544_meeting_name" set="{@lead_11544_meeting.name} {@user.name} {@stamp}" />
		</csv>
	</form>
	<wait timeout="3"/>
	<div id="list_subpanel_activities">
		<link text="{@lead_11544_meeting_name}" click="false" exists="true"/>
	</div>

	<!--Create a call from subpanel-->
	<form id="form_SubpanelQuickCreate_Calls">
		<csv file="{@global.scriptsdir}/modules/lib/Call_Create_Lib.csv" var="lead_11544_call">
			<timestamp/>
			<button id="Activities_logcall_button"/>
			<textfield id="name" set="{@lead_11544_call.name} {@user.name} {@stamp}" />

			<textfield id="date_start_date" set="{@lead_11544_call.date_start_date}" />
			<select id="date_start_hours" set="{@lead_11544_call.date_start_hours}" />
			<select id="date_start_minutes" set="{@lead_11544_call.date_start_minutes}" />

			<textfield name="duration_hours" set="{@lead_11544_call.duration_hours}" />
			<select name="duration_minutes" set="{@lead_11544_call.duration_minutes}" />

			<select id="direction" set="{@lead_11544_call.direction}" />
			<select id="status" set="{@lead_11544_call.status}" />

			<checkbox name="reminder_checked" set="{@lead_11544_call.reminder_checked}" />
			<textfield id="description" set="{@lead_11544_call.description}" />
			<button id="Calls_subpanel_save_button"/>

			<var var="lead_11544_call_name" set="{@lead_11544_call.name} {@user.name} {@stamp}"/>
		</csv>
	</form>
	<wait timeout="3"/>
	<div id="list_subpanel_activities">
		<link text="{@lead_11544_call_name}" click="false" exists="true"/>
	</div>

	<!--Compose a email from subpanel-->
	<timestamp/>
	<button id="composeemail_button"/>
	<textfield id="emailSubject0" set="Leads_11544_subject_{@stamp}"/>
	<var var="lead_11544_email_name" set="Leads_11544_subject_{@stamp}"/>

	<!--Send the email-->
	<table id="composeHeaderTable0">
		<button index="1" alert="true"/>
	</table>
	<wait timeout="5"/>

	<div id="list_subpanel_history">
		<link text="{@lead_11544_email_name}" click="false" exists="true"/>
	</div>

	<!--Covnert lead-->
	<button name="convert" value="Convert Lead"/>
	<textfield id="Accountsname" set="Leads_11544_Account_{@stamp}"/>
	<select id="lead_conv_ac_op_sel"  clear="true"/>
	<select id="lead_conv_ac_op_sel" set="Account,Contact"/>
	<button name="button" value="Save"/>

	<!--Go to newly create account detail view-->
	<link text="{@pre_lead_salutation} {@pre_lead_first_name} {@pre_lead_last_name}" click="false" exists="true"/>
	<link text="Leads_11544_Account_{@stamp}" />

	<!--Check account activities subpanel-->
	<div id="list_subpanel_activities">
		<link text="{@lead_11544_task_name}" click="false" exists="true"/>
		<link text="{@lead_11544_meeting_name}" click="false" exists="true"/>
		<link text="{@lead_11544_call_name}" click="false" exists="true"/>
		<link text="{@lead_11544_email_name}" click="false" exists="true"/>
	</div>

	<!--Verify convert lead with task,meeting,call and email record related-->
	<link id="moduleTab_Leads" />
	<textfield id="search_name_basic" set="{@pre_lead_first_name}" />
	<button id="search_form_submit" />

	<!--Go to detail view of the first record-->
	<link text="{@pre_lead_salutation} {@pre_lead_first_name} {@pre_lead_last_name}" />
	<browser assert="{@pre_lead_salutation} {@pre_lead_first_name} {@pre_lead_last_name}" />
	<div id="list_subpanel_activities">
		<link text="{@lead_11544_task_name}" click="false" exists="true"/>
		<link text="{@lead_11544_meeting_name}" click="false" exists="true"/>
		<link text="{@lead_11544_call_name}" click="false" exists="true"/>
		<link text="{@lead_11544_email_name}" click="false" exists="true"/>
	</div>

	<!--Verify convert contact with task,meeting,call and email record related-->
	<link id="moduleTab_Contacts" />
	<textfield id="search_name_basic" set="{@pre_lead_first_name}" />
	<button id="search_form_submit" />

	<!--Go to contact detail view of the first record-->
	<link text="{@pre_lead_salutation} {@pre_lead_first_name} {@pre_lead_last_name}" />
	<div id="list_subpanel_activities">
		<link text="{@lead_11544_task_name}" click="false" exists="true"/>
		<link text="{@lead_11544_meeting_name}" click="false" exists="true"/>
		<link text="{@lead_11544_call_name}" click="false" exists="true"/>
		<link text="{@lead_11544_email_name}" click="false" exists="true"/>
	</div>

	<!--Set admin back to move default value-->
	<link text="Admin"/>
	<link text="System Settings"/>
	<select name="lead_conv_activity_opt" set="Move"/>
	<button name="save" />

	<!--Delete the record-->
	<script file="{@global.scriptsdir}/modules/lib/Lead_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Account_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Contact_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Task_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Meeting_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Call_Delete_Lib.xml" />
	<puts text="Test: Leads_11544.xml finished" />
</soda>
