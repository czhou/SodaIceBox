
<soda>
	<!--
		Covert a new lead with moving related email to contact
	-->
	<puts text="Test: Leads_11516.xml starting" />

	<!--Create three records and save its counter-->
	<script file="{@global.scriptsdir}/modules/lib/Email_Setting_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Lead_Create_Lib.xml" />

	<link id="moduleTab_Leads" />

	<!--Select a lead record-->
	<textfield id="search_name_basic" set="{@pre_lead_first_name}" />
	<button id="search_form_submit" />

	<!--Go to detail view of the first record-->
	<link text="{@pre_lead_salutation} {@pre_lead_first_name} {@pre_lead_last_name}" />
	<browser assert="{@pre_lead_salutation} {@pre_lead_first_name} {@pre_lead_last_name}" />

	<!--Compose a email from subpanel-->
	<timestamp/>
	<button id="composeemail_button"/>
	<textfield id="emailSubject0" set="Leads_11516_subject_{@stamp}"/>
	<var var="lead_11516_email_name" set="Leads_11516_subject_{@stamp}"/>

	<!--Send the email-->
	<table id="composeHeaderTable0">
		<button index="1" alert="true"/>
	</table>
	<wait timeout="5"/>

	<div id="list_subpanel_history">
		<link text="{@lead_11516_email_name}" click="false" exists="true"/>
	</div>

	<!--Covnert lead-->
	<button name="convert" value="Convert Lead"/>
	<textfield id="Accountsname" set="Leads_11516_Account_{@stamp}"/>
	<select id="lead_conv_ac_op_sel" set="Contact"/>
	<button name="button" value="Save"/>

	<!--Go to newly create contact detail view-->
	<link text="Leads_11516_Account_{@stamp}" click="false" exists="true"/>
	<link text="{@pre_lead_salutation} {@pre_lead_first_name} {@pre_lead_last_name}" />

	<!--Check contact history subpanel-->
	<div id="list_subpanel_history">
		<link text="{@lead_11516_email_name}" click="false" exists="true"/>
	</div>

	<!--Verify convert lead without email record related-->
	<link id="moduleTab_Leads" />
	<textfield id="search_name_basic" set="{@pre_lead_first_name}" />
	<button id="search_form_submit" />

	<!--Go to detail view of the first lead record-->
	<link text="{@pre_lead_salutation} {@pre_lead_first_name} {@pre_lead_last_name}" />
	<browser assert="{@pre_lead_salutation} {@pre_lead_first_name} {@pre_lead_last_name}" />
	<div id="list_subpanel_history">
		<link text="{@lead_11516_email_name}" click="false" exists="false"/>
	</div>

	<!--Verify convert account without email record related-->
	<link id="moduleTab_Accounts" />
	<textfield id="name_basic" set="Leads_11516_Account_{@stamp}" />
	<button id="search_form_submit" />

	<!--Go to account detail view of the first record-->
	<link text="Leads_11516_Account_{@stamp}" />
	<div id="list_subpanel_history">
		<link text="{@lead_11516_email_name}" click="false" exists="false"/>
	</div>

	<!--Delete the record-->
	<script file="{@global.scriptsdir}/modules/lib/Lead_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Account_Delete_Lib.xml" />
	<script file="{@global.scriptsdir}/modules/lib/Contact_Delete_Lib.xml" />
	<puts text="Test: Leads_11516.xml finished" />
</soda>
