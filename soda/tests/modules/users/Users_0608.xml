<soda>
	<!-- verify team membership can be updated when modify report to -->
    <puts text="Test: User_0608.xml starting." />
    <csv file="{@global.scriptsdir}/modules/lib/SugarInit_Lib.csv" var="SugarInit0608" />
    <timestamp/>

    <!-- Go to User Management -->
	<link id="admin_link" />
    <link href="./index.php?module=Users&amp;action=index" />
    <browser assert="Users" />

    <!-- Create a new user. -->
    <link text="Create New User" />

    <csv file="{@global.scriptsdir}/csvs/users/Users_0608.csv" var="users_record_0608">
		<textfield name="sugar_user_name" set="{@users_record_0608.last_name}{@stamp}" />
		<textfield id="last_name" set="{@users_record_0608.last_name}{@stamp}" />
		<textfield id="Users0emailAddress0" set="{@users_record_0608.email}" />

		<!-- Select report to user. -->
		<div id="information">
			<button value="Select" />
		</div>
		<browser assert="User Search" />
		<form id="popup_query_form"> 
			<textfield name="last_name_advanced" set="{@users_record_0608.old_report}" />
			<button value="Search" />
		</form>
		<table class="list view">
			<link text="{@users_record_0608.old_report}" />
		</table>
		<wait condition="true">
			<link text="Password" />
		</wait>
		<textfield id="new_password" set="{@users_record_0608.pw}" />
		<textfield id="confirm_pwd" set="{@users_record_0608.pw}" />
		
		<button value="Save" />
		<browser assert="{@users_record_0608.last_name}{@stamp}" />

		<!-- Check initial team membership. -->
		<div id="information">
			<browser assert="Reports to:" />
			<row index="5"> 
				<link index="1" text="{@users_record_0608.old_report}" />
			</row>
		</div>
		<browser assert="Users" />
		<link text="{@users_record_0608.last_name}{@stamp}" click="false" />
		
		<!-- Modify "Reports To". -->
		<link text="Users" />
		<table class="list view">
			  <link text="{@users_record_0608.last_name}{@stamp}" />
		</table>
		<browser assert="{@users_record_0608.last_name}{@stamp}" />
		<button value="Edit" />
		<div id="information">
			<button value="Select" />
		</div>
		<browser assert="User Search" />
		<form id="popup_query_form"> 
			<textfield name="last_name_advanced" set="{@users_record_0608.new_report}" />
			<button value="Search" />
		</form>
		<table class="list view">
			<link text="{@users_record_0608.new_report}" />
		</table>
		<button value="Save" />
		<link text="{@users_record_0608.new_report}" exists="true" />
		<browser assert="{@users_record_0608.last_name}{@stamp}" />

		<!-- Check new team membership. -->
		<div id="information">
			<browser assert="Reports to:" />
			<row index="5"> 
				<link index="1" text="{@users_record_0608.new_report}" />
			</row>
		</div>
		<browser assert="Users" />
		<link text="{@users_record_0608.last_name}{@stamp}" click="false" />
		
		<!-- Check old team membership removed. -->
		<link text="Users" />
		<table class="list view">
			  <link text="{@users_record_0608.old_report}" />
		</table>
		
		<div class="moduleTitle">
			<link href="index.php?module=Users&action=index" exists="true" />
			<browser assert="{@users_record_0608.old_report}" />
		</div>
		<link text="{@users_record_0608.last_name}{@stamp}" click="false" exists="false" />

		<!-- Clean Up: Delete test data.-->
		<link id="admin_link" />
		<browser assert="Administration" />

		<link href="./index.php?module=Users&amp;action=index" />
		<browser assert="Users" />

		<button id="search_form_clear" />
		<textfield name="search_name_basic" set="{@users_record_0608.last_name}{@stamp}" />
		<button id="search_form_submit" />

		<link text="{@users_record_0608.last_name}{@stamp}" />
		
		<button value="Delete" />
		<button value="OK" />
		<button value="Cancel" />

		<!--Clear search-->
		<button id="search_form_clear" />
		<button id="search_form_submit" />
	</csv>

	<puts text="Test: User_0608.xml finished." />
</soda>
